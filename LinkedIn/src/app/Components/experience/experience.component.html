<div class="experience-container">
  <div class="experience-header">
    <a class="arrow-left" *ngIf="isExperiencePage" routerLink="/profile">
      <p>&#8592;</p>
    </a>
    <div class="central">
      <h5>Experiences</h5>
      <span id="plus-icon" (click)="buttonHandler()"> + </span>
      <img
        id="pencil"
        src="../../assets/pencil.png"
        alt=""
        (click)="open(content)"
      />
    </div>
  </div>
  <div *ngFor="let experience of experiences" class="experience-box">
    <div company-img-container>
      <img id="company-img" src="../../assets/ghost-company.png" alt="" />
    </div>
    <div id="experience-info-container">
      <p id="experience-role">{{ experience.role }}</p>
      <p>{{ experience.company }}</p>
      <p class="experience-date-area-info">
        {{ experience.startDate | date : "MMM yy" }} -
        <span
          >{{ experience.endDate | date : "MMM yy" }} â€¢
          {{
            calculateDateDifference(experience.startDate, experience.endDate)
          }}
        </span>
      </p>
      <p class="experience-date-area-info">{{ experience.area }}</p>
      <p id="experience-description">{{ experience.description }}</p>
    </div>
    <button (click)="deleteExperience(experience._id)" class="btn btn-danger">
      Delete
    </button>

    <button class="btn btn-primary" (click)="openModifyModal(experience._id)">
      Modify
    </button>
  </div>
  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Modifica presentazione</h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="createExperience()">
        <div class="mb-3">
          <label for="role">Lavoro</label>
          <div class="input-group">
            <input
              type="text"
              id="role"
              class="form-control"
              [(ngModel)]="newExperience.role"
              name="role"
            />
          </div>
        </div>
        <div class="mb-3">
          <label for="company">Azienda</label>
          <div class="input-group">
            <input
              type="text"
              id="company"
              class="form-control"
              [(ngModel)]="newExperience.company"
              name="company"
            />
          </div>
          <label for="role">Descrizione</label>
          <div class="input-group">
            <input
              type="text"
              id="description"
              class="form-control"
              [(ngModel)]="newExperience.description"
              name="description"
            />
          </div>
          <label for="role">Area</label>
          <div class="input-group">
            <input
              type="text"
              id="area"
              class="form-control"
              [(ngModel)]="newExperience.area"
              name="area"
            />
          </div>
        </div>
        <div class="mb-3">
          <label for="startDate">Data di inizio</label>
          <div class="input-group">
            <input
              type="date"
              id="startDate"
              class="form-control"
              [(ngModel)]="newExperience.startDate"
              name="startDate"
            />
          </div>
        </div>
        <div class="mb-3">
          <label for="endDate">Data di fine</label>
          <div class="input-group">
            <input
              type="date"
              id="endDate"
              class="form-control"
              [(ngModel)]="newExperience.endDate"
              name="endDate"
            />
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark"
        (click)="
          modal.close('Save click');
          modifyMyExperience(selectedExperienceId, newExperience)
        "
      >
        Save
      </button>
    </div>
  </ng-template>
</div>
